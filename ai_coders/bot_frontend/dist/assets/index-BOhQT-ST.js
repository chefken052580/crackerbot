import{r as i,l as b,j as e,F as j,a as k,b as S,R as w,c as N}from"./vendor-mjSMBnJJ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const C=s=>{const[n,a]=i.useState(null),[d,r]=i.useState(!1),c=i.useCallback(()=>{console.log("Attempting to connect to WebSocket server at:",s);const o=b(s,{transports:["websocket"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,timeout:3e4,autoConnect:!0});return o.on("connect",()=>{console.log("WebSocket Connected"),r(!0)}),o.on("connect_error",u=>{console.error("WebSocket connection error:",u),r(!1)}),o.on("disconnect",u=>{console.log("WebSocket Disconnected:",u),r(!1)}),a(o),o},[s]);i.useEffect(()=>{let o=c();return()=>{o&&o.disconnect()}},[c]);const m=i.useCallback(()=>{n&&(n.disconnect(),console.log("Manually triggering reconnection"),a(c()))},[n,c]);return{socket:n,reconnect:m,isSocketConnected:()=>d&&n&&n.connected}},v=({message:s})=>{let n;switch(s.type){case"command":n=s.command?`Command: ${s.command}`:"Unknown command";break;case"response":n=s.text||"Empty response";break;case"general_message":n=s.text||"Empty message";break;default:n=s.text||s.command||"Unknown message type"}let a=s.user?`${s.user}: `:"System: ";return e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-neon-green font-semibold",children:a}),e.jsx("span",{className:"ml-2",children:n})]})},T=[{command:"/list_bot_health",description:"List Bot Health"},{command:"/show_bot_tasks",description:"Show Bot Tasks"},{command:"/start_task",description:"Start New Task"},{command:"/stop_bots",description:"Stop All Bots"},{command:"/list_projects",description:"List All Projects"}],A=5,h=()=>{const[s,n]=i.useState([]),[a,d]=i.useState(""),[r,c]=i.useState(!1),[m,x]=i.useState(0),{socket:o,reconnect:u,isSocketConnected:p}=C("ws://websocket_server:5002");i.useEffect(()=>{if(o)return o.on("message",t=>{console.log("Received message:",t),n(l=>[...l,{...t,type:"bot"}])}),o.on("commandResponse",t=>{console.log("Command response:",t),n(l=>[...l,{user:"System",text:t.success?t.response:`Error: ${t.error}`,type:"system"}])}),o.on("connect_error",t=>{console.error("Socket connection error:",t),n(l=>[...l,{user:"System",text:`Connection Error: ${t.message}`,type:"system"}])}),o.on("disconnect",t=>{console.log("Socket disconnected:",t),n(l=>[...l,{user:"System",text:`Disconnected: ${t}`,type:"system"}])}),()=>{o.off("message"),o.off("commandResponse"),o.off("connect_error"),o.off("disconnect")}},[o]);const g=()=>{o&&a.trim()&&(p()?(a.startsWith("/")?o.emit("command",{command:a,user:"Admin",target:"bot_lead"}):o.emit("message",{type:"message",text:a,user:"Admin"}),n(t=>[...t,{user:"Admin",text:a,type:"user"}]),d(""),x(0)):m<A?(console.error("Socket is not connected. Attempting to reconnect..."),u(),n(t=>[...t,{user:"System",text:"Attempting to reconnect...",type:"system"}]),x(t=>t+1)):n(t=>[...t,{user:"System",text:"Failed to reconnect after multiple attempts.",type:"system"}]))},y=t=>{const l=t.target.value;d(l),l.startsWith("/")?c(!0):c(!1)},f=t=>{d(t),c(!1)};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-900 border border-gray-700 rounded-lg shadow-lg p-4 text-gray-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-neon-yellow mb-4",children:"Bot Chat Room"}),e.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-700 rounded-lg p-4 bg-gray-800",children:s.map((t,l)=>e.jsx(v,{message:t},l))}),r&&e.jsx("div",{className:"absolute bg-gray-800 border border-gray-600 rounded-md shadow-md p-2 mt-2 z-10",children:T.map(t=>e.jsxs("div",{onClick:()=>f(t.command),className:"cursor-pointer p-2 hover:bg-gray-700 rounded-md",children:[e.jsx("span",{className:"text-neon-yellow font-bold",children:t.command})," - ",t.description]},t.command))}),e.jsxs("div",{className:"flex mt-4 relative",children:[e.jsx("input",{type:"text",value:a,onChange:y,placeholder:"Type your message or command...",className:"flex-1 p-2 rounded-l-md bg-gray-800 border border-gray-600 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-yellow",onKeyPress:t=>t.key==="Enter"&&g()}),e.jsx("button",{onClick:g,className:"bg-neon-green text-gray-900 px-4 py-2 rounded-r-md hover:bg-neon-yellow transition",children:"Send"})]}),e.jsx("button",{onClick:u,className:"mt-2 bg-neon-blue text-gray-900 px-4 py-2 rounded hover:bg-neon-yellow transition",children:"Reconnect"})]})},_=()=>e.jsxs("div",{className:"text-gray-300",children:[e.jsx("h2",{className:"text-2xl text-neon-yellow mb-2",children:"Wallet Tracker"}),e.jsx("p",{children:"Track wallets and their balances here."})]}),E=()=>e.jsxs("div",{className:"text-gray-300",children:[e.jsx("h2",{className:"text-2xl text-neon-yellow mb-2",children:"Token Scanner"}),e.jsx("p",{children:"Scan and analyze tokens here."})]}),R=()=>{const[s,n]=i.useState("chatroom"),a=()=>{switch(s){case"chatroom":return e.jsx(h,{});case"wallet":return e.jsx(_,{});case"token":return e.jsx(E,{});default:return e.jsx(h,{})}};return e.jsxs("div",{className:"flex h-screen bg-gray-900 text-gray-300",children:[e.jsxs("aside",{className:"w-64 bg-gray-800 flex flex-col shadow-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsx("h1",{className:"text-3xl font-bold text-neon-yellow text-center",children:"CrackerBot.io"})}),e.jsxs("nav",{className:"flex-1 flex flex-col mt-4 space-y-2",children:[e.jsxs("button",{onClick:()=>n("chatroom"),className:`flex items-center p-3 rounded-md ${s==="chatroom"?"bg-gray-700 text-neon-green shadow-md":"hover:bg-gray-700 hover:text-neon-yellow transition"}`,children:[e.jsx(j,{size:20,className:"mr-3"}),e.jsx("span",{children:"Ai Coders"})]}),e.jsxs("button",{onClick:()=>n("wallet"),className:`flex items-center p-3 rounded-md ${s==="wallet"?"bg-gray-700 text-neon-green shadow-md":"hover:bg-gray-700 hover:text-neon-yellow transition"}`,children:[e.jsx(k,{size:20,className:"mr-3"}),e.jsx("span",{children:"Wallet Tracker"})]}),e.jsxs("button",{onClick:()=>n("token"),className:`flex items-center p-3 rounded-md ${s==="token"?"bg-gray-700 text-neon-green shadow-md":"hover:bg-gray-700 hover:text-neon-yellow transition"}`,children:[e.jsx(S,{size:20,className:"mr-3"}),e.jsx("span",{children:"Token Scanner"})]})]})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-4xl bg-gray-800 border border-gray-700 rounded-lg shadow-2xl p-6",children:a()})})]})};w.createRoot(document.getElementById("root")).render(e.jsx(N.StrictMode,{children:e.jsx(R,{})}));
//# sourceMappingURL=index-BOhQT-ST.js.map
